package com.chuckerteam.chucker

import android.annotation.SuppressLint
import android.content.Context
import androidx.test.ext.junit.runners.AndroidJUnit4
import androidx.test.platform.app.InstrumentationRegistry
import com.chuckerteam.chucker.internal.support.SpanTextUtil
import com.google.common.truth.Truth
import org.junit.Assert
import org.junit.Before
import org.junit.Test
import org.junit.runner.RunWith

@RunWith(AndroidJUnit4::class)
public class SpanUtilTest {
    private lateinit var context: Context

    @Before
    public fun init() {
        context = InstrumentationRegistry.getInstrumentation().context
    }

    @SuppressLint("CheckResult")
    @Test
    public fun long_json_parses_value() {
        val longJsonString = "{\"enable_preload_skip_coupons\":true,\"enable_coupon_v2\":true,\"enable_updated_g1g1\":true,\"enable_physical_lock_unlock\":true,\"enable_physical_lock_lock\":true,\"ios_min_version\":\"4.190.0\",\"ios_charger_min_version\":\"3.1.9\",\"android_min_version\":\"4.190.0\",\"android_charger_min_version\":\"3.4.0\",\"bluetooth_firmware\":{\"version\":38,\"model\":\"es\",\"force\":true},\"automated_analytics\":{\"enabled\":true,\"roles\":{\"mechanic\":false,\"bird_watcher\":true,\"charger\":false,\"rider\":false,\"operator\":false}},\"hide_missing_threshold\":2,\"enable_community_mode\":true,\"enable_report_bad_riding\":false,\"enable_bonus_deals\":true,\"require_drivers_license\":false,\"enable_contact_invite\":false,\"request_end_ride_photo\":false,\"menu_charger_start_rides\":1000000,\"charger_short_code\":true,\"show_nest_release\":true,\"release_start_hour\":0.0,\"release_end_hour\":24.0,\"mech_scan_to_release\":true,\"enable_due_time\":true,\"limited_data_on_validate\":false,\"enable_block_capture_on_overdue\":true,\"charger_can_mark_damaged\":true,\"cloudflare_sdk_enabled\":true,\"disable_power_supplies\":true,\"enable_capture_flow_v2_charger\":true,\"enable_bounty_filter_charger\":true,\"enable_capture_flow_v2_mechanic\":true,\"android_bird_watcher\":{\"enable_birdwatcher_toolbox\":false,\"enable_birdwatcher_map_filter\":false,\"enable_birdwatcher_bird_profile\":false,\"enable_birdwatcher_update_damage_status\":false,\"enable_birdwatcher_replace_qr\":false,\"enable_birdwatcher_report_large_pile\":false,\"enable_birdwatcher_report_missing_id\":false,\"enable_birdwatcher_log_repairs\":false,\"inspection\":{\"enabled\":false,\"test_ride_enabled\":false,\"max_photos\":4},\"enable_new_repair_log_options\":false,\"mark_damaged_options\":{\"damaged_brain\":{\"enabled\":false,\"marks_damage\":true,\"sends_zendesk_ticket\":false},\"flat_tire\":{\"enabled\":false,\"marks_damage\":true,\"sends_zendesk_ticket\":false},\"cut_wires\":{\"enabled\":false,\"marks_damage\":true,\"sends_zendesk_ticket\":false},\"other\":{\"enabled\":true,\"marks_damage\":true,\"sends_zendesk_ticket\":false}},\"enable_replace_physical_locks\":false,\"enable_showing_downed_bird_pins\":false},\"ios_bird_watcher\":{\"enable_birdwatcher_toolbox\":false,\"enable_birdwatcher_map_filter\":false,\"enable_birdwatcher_bird_profile\":false,\"enable_birdwatcher_update_damage_status\":false,\"enable_birdwatcher_replace_qr\":false,\"enable_birdwatcher_report_large_pile\":false,\"enable_birdwatcher_report_missing_id\":false,\"enable_birdwatcher_log_repairs\":false,\"inspection\":{\"enabled\":false,\"test_ride_enabled\":false,\"max_photos\":4},\"enable_new_repair_log_options\":false,\"mark_damaged_options\":{\"damaged_brain\":{\"enabled\":false,\"marks_damage\":true,\"sends_zendesk_ticket\":false},\"flat_tire\":{\"enabled\":false,\"marks_damage\":true,\"sends_zendesk_ticket\":false},\"cut_wires\":{\"enabled\":false,\"marks_damage\":true,\"sends_zendesk_ticket\":false},\"other\":{\"enabled\":true,\"marks_damage\":true,\"sends_zendesk_ticket\":false}},\"enable_replace_physical_locks\":false,\"enable_showing_downed_bird_pins\":false},\"service_center\":{\"enable_repair_log\":false,\"enable_service_center_status\":false,\"enable_bulk_service_center_status\":false,\"enable_wake_sleep_birds\":false,\"enable_service_center_picker\":true,\"enable_enter_location_modal\":false,\"validate_warehouse\":false,\"enable_bluetooth_locks\":false,\"inventory\":{\"enable_inventory_count_update\":false,\"enable_kanban_inventory_count_update_v1\":false,\"enable_excess_inventory_modal\":false},\"batch_actions\":{\"enabled\":false,\"create_batch\":false,\"add_to_batch\":false,\"view_all_batches\":false},\"whitelist\":false,\"bulk_progress\":{\"enable_hibernation\":false,\"enable_hibernation_create_batch\":false,\"enable_charging\":false,\"hibernate_min_battery\":40},\"quality_control\":{\"enabled\":false,\"flow\":\"list\",\"programmatic_qc_enabled\":false},\"inspection\":{\"hide_issue_details\":false},\"enable_service_center_app\":false,\"download_assets\":false,\"entry_routing\":{\"enabled\":true},\"scrap\":{\"enabled\":false},\"hard_count\":{\"enabled\":true},\"routing_on_rails\":{\"enabled\":false}},\"bird_watcher_distance_check\":true,\"bird_watcher_distance_check_max_radius\":50,\"enable_automatic_tracking_mechanic\":false,\"android_damage_nest\":{\"minimum_client_version\":\"4.18.0\",\"show_charger_damage_drops\":true,\"show_damage_nests_to_all_chargers\":true,\"enable_charger_reserve_damage_drops\":false,\"enable_charger_damage_nest_intro\":true,\"enable_headlight_toggle\":false,\"enable_rider_scan_modal\":true,\"hide_capacity\":false},\"ios_damage_nest\":{\"minimum_client_version\":\"4.10.1\",\"show_charger_damage_drops\":true,\"show_damage_nests_to_all_chargers\":true,\"enable_charger_reserve_damage_drops\":false,\"enable_charger_damage_nest_intro\":true,\"enable_headlight_toggle\":false,\"enable_rider_scan_modal\":true,\"hide_capacity\":false},\"damage_nest\":{\"show_charger_damage_drops\":true,\"show_damage_nests_to_all_chargers\":true,\"enable_charger_reserve_damage_drops\":false,\"enable_charger_damage_nest_intro\":false,\"enable_headlight_toggle\":false,\"enable_rider_scan_modal\":false,\"hide_capacity\":false},\"collection_nest\":{\"show_charger_collection_drops\":true,\"enable_charger_reserve_collection_drops\":false,\"hide_capacity\":false},\"android_storage_nest\":{\"show_storage_nests\":true,\"mech_storage_nest_intro\":false,\"force_release_admin_approval\":false},\"ios_storage_nest\":{\"show_storage_nests\":true,\"mech_storage_nest_intro\":false,\"force_release_admin_approval\":false},\"scan_gun_storage_nest\":{\"show_storage_nests\":false,\"mech_storage_nest_intro\":false,\"force_release_admin_approval\":true},\"enable_priority_collect_android\":false,\"enable_priority_collect_ios\":false,\"android_charger\":{\"enable_mark_damage\":true,\"enable_improved_task_list\":false,\"mark_damaged_copy_updates\":true,\"enable_report_multiple_birds_rider\":false,\"enable_report_multiple_birds_charger\":false,\"block_bounty_map_on_task_limit_reached\":false,\"enable_community_mode\":true,\"enable_release_flow_v2_for_drops\":false,\"enable_active_nearby_birds_sweep\":true,\"require_bluetooth_on_capture\":false,\"require_bluetooth_on_release\":false,\"enable_tabbed_task_list\":true,\"enable_display_nest_radius\":false,\"enable_requirements_flow_v2\":false,\"enable_cancel_task_request\":false,\"hide_charger_marketing\":false,\"enable_last_ride_filter\":false,\"show_charger_marketing\":false,\"enable_frequent_location_updates\":true,\"enable_damaged_birds_pin\":false,\"enable_bird_type_filter\":false,\"enable_nest_multi_claim\":false,\"enable_branded_charger_experience\":false,\"enable_branded_charger_bounty_banner\":false,\"enable_branded_drop_map_banner\":false,\"map_pins_stale_threshold\":30000,\"hide_last_ridden_from_flight_bar\":false,\"enable_charger_role_session_persist\":false,\"bird_finder_tool_tip_map_seen_min_count\":5},\"ios_charger\":{\"enable_mark_damage\":true,\"enable_improved_task_list\":true,\"mark_damaged_copy_updates\":true,\"enable_report_multiple_birds_rider\":false,\"enable_report_multiple_birds_charger\":false,\"block_bounty_map_on_task_limit_reached\":false,\"enable_community_mode\":true,\"enable_release_flow_v2_for_drops\":true,\"enable_active_nearby_birds_sweep\":true,\"require_bluetooth_on_capture\":false,\"require_bluetooth_on_release\":false,\"enable_tabbed_task_list\":false,\"enable_display_nest_radius\":false,\"enable_requirements_flow_v2\":false,\"enable_cancel_task_request\":true,\"hide_charger_marketing\":false,\"enable_last_ride_filter\":false,\"show_charger_marketing\":false,\"enable_frequent_location_updates\":false,\"enable_damaged_birds_pin\":false,\"enable_bird_type_filter\":false,\"enable_nest_multi_claim\":false,\"enable_branded_charger_experience\":false,\"enable_branded_charger_bounty_banner\":false,\"enable_branded_drop_map_banner\":false,\"map_pins_stale_threshold\":30000,\"hide_last_ridden_from_flight_bar\":false,\"enable_charger_role_session_persist\":false,\"bird_finder_tool_tip_map_seen_min_count\":5},\"android_mechanic\":{\"enable_mark_damage\":true,\"enable_drop_map\":false,\"show_issues_to_mechs\":false,\"enable_release_flow_v2\":false},\"ios_mechanic\":{\"enable_mark_damage\":true,\"enable_drop_map\":true,\"show_issues_to_mechs\":false,\"enable_release_flow_v2\":false},\"ios_parking\":{\"thanking_preferred_parking\":false,\"give_incentive_amount\":false,\"message_amount_of_incentive\":true,\"parking_incentive_value\":35,\"enable_rider_parking_nest_annotation\":true,\"parking_minimum_zoom_level\":0.075,\"enable_rider_parking_review\":false,\"enable_outside_service_area_rider_bar_parking_fine_message\":false,\"show_parking_announcement\":false,\"enable_no_park_zone_no_end_ride_button\":false,\"enable_horizontal_accuracy_location\":false,\"enable_rider_parking_nest_radius\":true,\"enable_android_background_ride_photo_upload\":false,\"enable_nest_details_screen\":false,\"max_meters_from_parking_nest_to_be_close\":100,\"close_to_nest_parking_rate_minutes\":120,\"close_to_nest_parking_limit\":2,\"enable_close_to_nest_parking\":false,\"parking_location_verification_method\":\"google_vps_v2\",\"parking_location_verification\":{\"enabled\":true,\"method\":\"google_vps_v2\",\"method_blocked_ride_dialog\":\"google_vps\",\"timeout_seconds\":30,\"result_required\":false,\"skip_bird_scan\":false,\"required_proximity_to_nest_meters\":30.0,\"required_horizontal_accuracy_meters\":3.0},\"disable_parking_bottom_shelf_display\":true,\"rider_nest_additional_buffer_meters\":0.0,\"use_ultra_wide_camera_if_available\":false},\"android_parking\":{\"thanking_preferred_parking\":false,\"give_incentive_amount\":false,\"message_amount_of_incentive\":true,\"parking_incentive_value\":35,\"enable_rider_parking_nest_annotation\":true,\"parking_minimum_zoom_level\":16.5,\"enable_rider_parking_review\":false,\"enable_outside_service_area_rider_bar_parking_fine_message\":false,\"show_parking_announcement\":false,\"enable_no_park_zone_no_end_ride_button\":false,\"enable_horizontal_accuracy_location\":false,\"enable_rider_parking_nest_radius\":true,\"enable_android_background_ride_photo_upload\":true,\"enable_nest_details_screen\":false,\"max_meters_from_parking_nest_to_be_close\":100,\"close_to_nest_parking_rate_minutes\":120,\"close_to_nest_parking_limit\":2,\"enable_close_to_nest_parking\":false,\"parking_location_verification_method\":\"google_vps_v2\",\"parking_location_verification\":{\"enabled\":true,\"method\":\"google_vps_v2\",\"method_blocked_ride_dialog\":\"google_vps\",\"timeout_seconds\":30,\"result_required\":false,\"skip_bird_scan\":false,\"required_proximity_to_nest_meters\":30.0,\"required_horizontal_accuracy_meters\":3.0},\"disable_parking_bottom_shelf_display\":true,\"rider_nest_additional_buffer_meters\":0.0,\"use_ultra_wide_camera_if_available\":false},\"ios_network\":{\"enable_resilient_network_requests\":false,\"resilient_network_requests_expiration_period_seconds\":3600},\"android_network\":{\"enable_resilient_network_requests\":false,\"resilient_network_requests_expiration_period_seconds\":3600},\"priority_collect_message\":\"\",\"can_fix_qr\":true,\"enable_task_list_actions_v2\":false,\"enable_task_list_v2\":true,\"enable_task_list_actions_v2_wont_charge_action\":false,\"enable_task_list_actions_v2_wont_power_on_action\":false,\"enable_task_list_actions_v2_damaged_action\":false,\"enable_task_list_actions_v2_indirect_cancel\":true,\"become_charger_banner_copy\":\"\",\"enable_drop_feedback_charger\":true,\"skip_charger_onboard_before\":\"2018-05-15T15:25:00+07:00\",\"force_charger_agreement_before\":\"2018-06-20T10:00:00+07:00\",\"enable_operator_mode\":true,\"dynamic_agreements_for_riders\":true,\"dynamic_agreements_allow_batching\":true,\"dynamic_agreements_for_contractors\":true,\"enable_configurable_contractor_onboarding\":false,\"enable_admin_needs_parts_button\":true,\"safety_menu_url\":\"http://www.bird.co/safety-mobile\",\"enable_give_free_rides\":true,\"banner_steps\":[{\"rides\":1000000,\"banner\":\"how_to_ride\"},{\"rides\":1000000,\"banner\":\"charger_start\"}],\"rider_tutorial\":{\"steps\":[{\"id\":\"kick_scooter_safe_riding\",\"title\":\"SAFE RIDING\",\"body\":\"Bring your own helmet to stay safe while you ride.\",\"file_name\":\"rt_safe_riding\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"kick_scooter_kickstand_release\",\"title\":\"Release the center stand\",\"body\":\"Step on the front edge of the center stand while pushing the vehicle forward.\",\"file_name\":\"rt_kick_centerstand_down\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"kick_scooter_accelerating\",\"title\":\"START BIRD\",\"body\":\"Stand on vehicle, push-off, then push throttle button with thumb to ride.\",\"file_name\":\"rt_start_the_bird_es\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"kick_scooter_brakes\",\"title\":\"BRAKES\",\"body\":\"Squeeze brake with left hand to slow down.\",\"file_name\":\"rt_brakes_es\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"kick_scooter_where_to_ride\",\"title\":\"WHERE TO RIDE\",\"body\":\"Ride in bike lanes, no riding on sidewalks.\",\"file_name\":\"rt_where_to_ride\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"kick_scooter_kickstand_engage\",\"title\":\"Put down the center stand\",\"body\":\"Push the stand to the ground with your foot, then pull the vehicle up and back.\",\"file_name\":\"rt_kick_centerstand_up\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"kick_scooter_park\",\"title\":\"PARKING\",\"body\":\"Don't block public pathways. Park by bike racks when available.\",\"file_name\":\"rt_parking_1\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_intro\",\"title\":\"Get to know your vehicle\",\"body\":\"Before you take off, look over the brakes, throttle, and tires.\",\"file_name\":\"rt_moped_brakes_wheels\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_helmet\",\"title\":\"Grab your helmet\",\"body\":\"Make sure to wear a helmet when riding - it's the law.\",\"file_name\":\"rt_moped_helmet\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_double_riding\",\"title\":\"One or two to a seat\",\"body\":\"You're responsible for the safety of your passenger at all times.\",\"file_name\":\"rt_moped_doubleriding\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_kickstand_release\",\"title\":\"Release the center stand\",\"subtitle\":\"Push the vehicle forward, then kick the stand up with your foot.\",\"file_name\":\"rt_moped_centerstand_down\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_accelerating\",\"title\":\"Rotate to accelerate\",\"body\":\"The throttle is on the inside of the right handgrip. Rotate to go, release to slow.\",\"file_name\":\"rt_moped_accelerating\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_brakes\",\"title\":\"Pull to brake\",\"body\":\"Pull both brake levers evenly to come to a stop.\",\"file_name\":\"rt_moped_braking\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_where_to_ride\",\"title\":\"Cruise on streets, not sidewalks\",\"body\":\"Max speed is 20 mph. Bike lanes are allowed.\",\"file_name\":\"rt_moped_street_riding\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_park\",\"title\":\"Park on the street\",\"body\":\"Park in the street, or a motorcycle spot, perpendicular to the curb.\",\"file_name\":\"rt_moped_street_parking\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_tow_zones\",\"title\":\"Avoid tow zones and meters\",\"body\":\"Avoid meters, painted curbs, tow zones, and street cleaning. Parking fines are rider's responsibility.\",\"file_name\":\"rt_moped_street_parking_signs\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"moped_kickstand_engage\",\"title\":\"Put down the center stand\",\"body\":\"Push the stand to the ground with your foot, then pull the vehicle up and back.\",\"file_name\":\"rt_moped_centerstand_up\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0,\"text_color\":0,\"button_background_color\":0,\"button_text_color\":16777215},{\"id\":\"local_rule\",\"title\":\"LOCAL RULES\",\"subtitle\":\"∼\",\"body\":\"• No riding underage\\r\\n• Follow the rules of the road\\r\\n• Stay safe - wear a helmet\",\"progress_start\":0.0,\"progress_loop_start\":0.0,\"progress_loop_end\":1.0,\"delay_loop_start\":0.0}],\"all\":[\"kick_scooter_safe_riding\",\"kick_scooter_accelerating\",\"kick_scooter_brakes\",\"kick_scooter_where_to_ride\",\"kick_scooter_park\",\"local_rule\"],\"contextual_m365\":[\"kick_scooter_safe_riding\",\"kick_scooter_accelerating\",\"kick_scooter_brakes\",\"kick_scooter_where_to_ride\",\"local_rule\"],\"contextual_es\":[\"kick_scooter_safe_riding\",\"kick_scooter_accelerating\",\"kick_scooter_brakes\",\"kick_scooter_where_to_ride\",\"local_rule\"],\"contextual_bc\":[\"moped_intro\",\"moped_helmet\",\"moped_double_riding\",\"moped_kickstand_release\",\"moped_accelerating\",\"moped_brakes\",\"moped_where_to_ride\",\"moped_park\",\"moped_tow_zones\",\"moped_kickstand_engage\",\"local_rule\"],\"contextual_b2\":[\"kick_scooter_safe_riding\",\"kick_scooter_kickstand_release\",\"kick_scooter_accelerating\",\"kick_scooter_brakes\",\"kick_scooter_where_to_ride\",\"kick_scooter_kickstand_engage\",\"kick_scooter_park\",\"local_rule\"],\"contextual_b3\":[\"kick_scooter_safe_riding\",\"kick_scooter_kickstand_release\",\"kick_scooter_accelerating\",\"kick_scooter_brakes\",\"kick_scooter_where_to_ride\",\"kick_scooter_kickstand_engage\",\"kick_scooter_park\",\"local_rule\"],\"class_scooter\":[\"kick_scooter_safe_riding\",\"kick_scooter_accelerating\",\"kick_scooter_brakes\",\"kick_scooter_where_to_ride\",\"kick_scooter_park\",\"local_rule\"],\"class_moped\":[\"moped_intro\",\"moped_helmet\",\"moped_double_riding\",\"moped_kickstand_release\",\"moped_accelerating\",\"moped_brakes\",\"moped_where_to_ride\",\"moped_park\",\"moped_tow_zones\",\"moped_kickstand_engage\",\"local_rule\"],\"parking\":[\"kick_scooter_park\"],\"class_scooter_parking\":[\"kick_scooter_park\"],\"class_moped_parking\":[\"moped_park\",\"moped_tow_zones\"]},\"tutorial_v2\":{\"enabled\":true},\"charger_external_account_required\":true,\"nest_claim_duration_minutes\":30,\"show_charge_task_limit\":false,\"enforce_parking_areas\":true,\"enable_preferred_parking_v0\":false,\"enforce_no_parking_v0\":true,\"android_block_mock_location_providers\":true,\"stp_billing_address_requirement\":1,\"min_route_distance_rider\":0,\"google_pay_available\":true,\"max_autoselect_distance_rider\":0,\"min_autoselect_distance_rider\":0,\"use_billed_minutes_for_ride_time\":true,\"hide_time_in_ride_history\":false,\"drop_proximity_using_location_accuracy\":true,\"nest_radius_multiplier\":1.0,\"max_location_accuracy_radius\":150.0,\"enable_in_ride_bd_tracks\":true,\"enable_bd_bluetooth_override\":false,\"force_bt_permission_by_model\":[],\"force_bt_connection_by_model\":[],\"update_bt_max_speed_by_model\":[\"rf\",\"b2\",\"bd\"],\"enable_apple_pay\":true,\"enable_feature_announcements\":true,\"enable_price_per_mile_feature_announcement\":false,\"enable_outside_service_area_warnings\":true,\"local_config\":{\"contractor_zone_radius\":1000.0,\"helmet_min_rides\":1,\"weather_alert\":false,\"enable_marketing\":true,\"in_service\":true,\"current_service_status\":\"IN_SERVICE\",\"no_service_period\":\"5am - 8pm\",\"formatted_service_hours\":\"5am - 8pm\"},\"local\":{\"contractor_zone_radius\":1000.0,\"helmet_min_rides\":1,\"weather_alert\":false,\"enable_marketing\":true,\"in_service\":true,\"current_service_status\":\"IN_SERVICE\",\"no_service_period\":\"5am - 8pm\",\"formatted_service_hours\":\"5am - 8pm\"},\"ride\":{\"min_rider_age\":18,\"base_price\":100,\"minute_price\":51,\"included_minutes\":0,\"minimum_ride_price\":0,\"currency\":\"usd\",\"maximum_free_ride_amount\":500,\"minimum_user_balance\":-101,\"aggressive_end_ride_lock\":true,\"auto_pay_refill_amount\":0,\"auto_pay_use_fullscreen_flow\":false,\"accept_provisional_id\":true,\"auto_pay_incentive_amount\":0,\"auto_pay_prompt_first\":false,\"auto_pay_start_after_ride_count\":-1,\"auto_pay_nag_every_ride_count\":0,\"auto_pay_mandatory\":false,\"auto_pay_mandatory_min_balance\":0,\"price_change_exp_in_treatment_group\":false,\"smartlock_cable_unlock_flow_image_url\":[],\"smartlock_cable_lock_flow_image_url\":[],\"additional_fees\":{\"apply_tax\":true,\"fees\":[{\"amount\":25,\"kind\":\"none\",\"name\":\"Compliance Fee\"}],\"hide_tax_in_pricing_description\":false},\"localized_dynamic_price_string\":\"\$1 to start and \$0.51/minute + tax & fees.\",\"enable_single_auth_for_positive_balance\":true,\"enable_location_opt_out\":true,\"enable_ride_without_location_services\":false,\"end_ride\":{\"wait_for_foreground_location_seconds\":10.0,\"wait_for_foreground_config_seconds\":10.0,\"wait_for_foreground_areas_seconds\":10.0,\"wait_for_foreground_parking_nests_seconds\":10.0},\"enable_scanner_code_entry_v2\":true,\"force_client_tracks\":false,\"force_client_tracks_by_model\":[\"bd\"],\"display_brand_name_in_ride_receipt\":false,\"enable_scanless_reserved_ride_start\":true,\"enable_chat_bot_browser\":false,\"enable_owner_mode\":false,\"enable_multi_modal_map_pins\":true,\"enable_multi_modal_map_pins_in_ride\":false,\"enable_multi_modal_tutorial_button\":false,\"enable_multi_modal_tutorial_selection\":false,\"enable_map_areas_by_fleet\":false,\"enable_detailed_vehicle_info\":false,\"max_bird_code_length\":5,\"min_bird_code_length\":4,\"enable_outside_service_area_parking_ticket\":false,\"enable_outside_service_area_parking_ticket_accept_fine\":false,\"outside_service_area_parking_ticket_amount\":0,\"enable_chirp_on_scanless_ride_start\":false,\"prefer_chirp_alarm_on_scanless_ride_start\":false,\"enable_free_unlock_after_bad_scan\":false,\"enable_free_unlock_after_cancelled_ride\":false,\"enable_free_unlock_after_low_battery_ride\":false,\"enable_scanner_code_entry_tooltip\":true,\"scanner_code_entry_tooltip_max_entries\":1,\"scanner_code_entry_tooltip_max_views\":3,\"scanner_code_entry_tooltip_max_duration\":10,\"scanner_code_entry_tooltip_localized_copy\":\"Tap to enter code\",\"show_end_ride_parking_rules\":true,\"disable_end_ride_photo_middle_icon\":false,\"enable_ride_start_outside_operating_area\":false,\"max_ride_duration_outside_operating_area\":180,\"enable_ride_start_no_ride_zone\":false,\"max_ride_duration_no_ride_zone\":180,\"enable_android_scan_to_ride\":true,\"client_location_heuristic\":\"user_location\",\"warning\":{\"enable_ride_state_banner\":false,\"enable_rider_annotation_pills\":true,\"pin_tap_warning_presentation_kind\":\"none\",\"foreground_focus_warning_presentation_kind\":\"none\",\"end_ride_warning_presentation_kind\":\"alert\"},\"smartlock\":{\"unlock_available_post_ride_by_purpose_seconds\":{\"lock_to\":0,\"helmet\":20,\"helmets\":30},\"zendesk_article_id_by_purpose\":{\"helmet\":360031019151}},\"filter_nests_by_bird\":false,\"must_park_in_nest\":false,\"request_background_location_on_scan\":false,\"helmet_selfie\":{},\"safe_ride_start\":{\"enabled\":false},\"dispute\":{\"enabled\":false},\"hospitality\":{\"enabled\":false}},\"security\":{\"device_verification\":{\"endpoints\":{\"recaptcha_blocking\":{\"enabled\":true,\"log_only_if_device_check_failed\":false,\"service\":\"bird\",\"http_method\":\"post\",\"path\":\"/v1/payment/provider/card\",\"action\":\"add_card\",\"verification_methods\":[\"recaptcha_enterprise\",\"firebase_appcheck\"],\"strategy\":\"first_available\"}},\"recaptcha\":{\"site_key\":\"6LeXYz0eAAAAAPKX9-lUoAfq1gxH7LncglpT6fEq\"}}},\"multi_ride\":{\"enabled\":true,\"max_ride_count\":5,\"additional_rides_allow_bluetooth\":false,\"additional_rides_allow_physical_locks\":false},\"market_manifest\":{\"brands\":[]},\"bounty\":{\"currency\":\"usd\",\"charger_power_supply_deposit_amount\":1000,\"bounty_filter_price_max\":900,\"bounty_filter_price_step\":100},\"delivery\":{\"enabled\":false,\"pay_as_you_go\":false,\"cancellation_fee\":500,\"weekday_price\":1500,\"weekend_price\":2000,\"currency\":\"usd\",\"release_window_start_hour\":4,\"release_window_end_hour\":7,\"release_window_end_hour_client\":6,\"locked_ride_end_hour\":21,\"force_ride_end_hour\":22,\"release_radius\":20.0,\"use_new_merged_delivery_screen\":false,\"expire_routes_after_minutes\":45,\"enable_delivery_menu_item\":false,\"ios_enable_charger_delivery\":false,\"charger_can_schedule_delivery\":true,\"active_request_kind\":\"basic\"},\"long_term_rental\":{\"drop_off\":{\"enabled\":false,\"show_intro_once\":false,\"mobile_content\":{\"intro_header\":\"Rent a Bird of your own.\",\"intro_item_list\":[\"Unlimited rides starting from \$29.99/month\",\"Central pickup location\",\"Bluetooth lock included\"],\"payment_fine_print\":\"Your rental auto-renews on date listed above. You can cancel in app up to 24 hours before then to avoid next month's charge.\",\"menu_item_label\":\"Personal Rental\",\"cta_banner_label\":\"INTRODUCING PERSONAL RENTALS\"},\"support\":{\"support_article_id\":\"360019188812\"},\"required_fields\":[]},\"pick_up\":{\"enabled\":false,\"show_intro_once\":false,\"mobile_content\":{\"intro_header\":\"Rent a Bird of your own.\",\"intro_item_list\":[\"Unlimited rides starting from \$29.99/month\",\"Central pickup location\",\"Bluetooth lock included\"],\"payment_fine_print\":\"Your rental auto-renews on date listed above. You can cancel in app up to 24 hours before then to avoid next month's charge.\",\"menu_item_label\":\"Personal Rental\",\"cta_banner_label\":\"INTRODUCING PERSONAL RENTALS\"},\"support\":{\"support_article_id\":\"360019188812\"},\"required_fields\":[]},\"on_demand\":{\"enabled\":false,\"show_intro_once\":false,\"mobile_content\":{\"intro_header\":\"Rent a Bird of your own.\",\"intro_item_list\":[\"Unlimited rides starting from \$29.99/month\",\"Central pickup location\",\"Bluetooth lock included\"],\"payment_fine_print\":\"Your rental auto-renews on date listed above. You can cancel in app up to 24 hours before then to avoid next month's charge.\",\"menu_item_label\":\"Personal Rental\",\"cta_banner_label\":\"INTRODUCING PERSONAL RENTALS\"},\"support\":{\"support_article_id\":\"360019188812\"},\"required_fields\":[],\"pill_config\":{}},\"enabled\":false,\"show_intro_once\":false,\"mobile_content\":{\"intro_header\":\"Rent a Bird of your own.\",\"intro_item_list\":[\"Unlimited rides starting from \$29.99/month\",\"Central pickup location\",\"Bluetooth lock included\"],\"payment_fine_print\":\"Your rental auto-renews on date listed above. You can cancel in app up to 24 hours before then to avoid next month's charge.\",\"menu_item_label\":\"Personal Rental\",\"cta_banner_label\":\"INTRODUCING PERSONAL RENTALS\"},\"support\":{\"support_article_id\":\"360019188812\"}},\"shop\":{\"buy_a_bird_in_side_menu\":true,\"buy_a_bird_menu_name\":\"Private Birds\",\"buy_a_bird_shop_url\":\"https://shop.bird.co/\"},\"payment\":{\"charge_auto_pay_updates_at_or_less_than_zero_balance\":true,\"enable_paypal\":true,\"paypal_default_on_preload\":false,\"use_stripe_intents\":true,\"use_unified_payment_endpoints\":false,\"enable_remove_cards_on_v2\":true,\"preload_default_options\":[\"apple_google_pay\",\"paypal\",\"card\"],\"connected_account_id\":\"acct_1AXthsFnWIVhvQ7p\",\"enable_google_pay_bonus\":false,\"google_pay_bonus_amount\":0,\"enable_cash_pay\":true,\"self_balance_refund\":{\"enabled\":false},\"card_scanner_style\":\"in_house_scanner_first\",\"payment_settings_v2\":true,\"bank_redirect\":{},\"payment_method_to_provider\":{\"card\":\"stripe\",\"google_pay\":\"stripe\",\"paypal\":\"braintree\"},\"adyen\":{},\"reload\":{\"preload_ui_version\":\"choose_ppr_in_plans\"}},\"promo\":{\"enable_promos\":true,\"ignore_unactivated\":false,\"hide_earn_section\":false},\"fraud\":{\"collect_card_zip\":false,\"collect_card_name\":false,\"collect_card_billing_address\":false,\"auth_charge_amount\":500},\"reservation\":{\"enable_ride_reservation\":true,\"enable_new_users\":true,\"enable_reserve_intro_new_users\":false,\"maximum_reservation_duration_minutes\":30,\"base_price\":0,\"minute_price\":51,\"currency\":\"usd\",\"enable_free_reservations\":false,\"enable_reserve_promo_on_bad_scan\":false,\"enable_reserve_promo_on_cancelled_ride\":false,\"enable_reserve_promo_on_low_battery_cancelled_ride\":false,\"reserve_promo_offer_duration\":900,\"reserve_promo_reservation_duration\":900},\"communication_opt_in\":{\"communication_opt_in\":true,\"localized_communication_opt_in_string\":\"Send me promos and news from Bird and its partners via e-mail and other electronic messages.\"},\"tax_id\":{\"name\":\"SSN\",\"mask\":\"XXX-XX-XXXX\"},\"rider_map\":{\"show_battery_percentage\":true,\"show_range_instead_of_battery_percentage\":true,\"can_use_bird_nearby_partner_filtered\":false,\"scan_button_style\":\"qr_scan\",\"show_group_ride_button\":true,\"enable_user_location_v2\":true,\"zone_color_override\":{\"operational\":{\"fill_color\":{\"light_mode\":0,\"dark_mode\":0},\"border_color\":{\"light_mode\":0,\"dark_mode\":0},\"title_color\":{\"light_mode\":8505,\"dark_mode\":8505}},\"operational_inverse\":{\"fill_color\":{\"light_mode\":0,\"dark_mode\":0},\"border_color\":{\"light_mode\":0,\"dark_mode\":0}},\"no_ride\":{\"fill_color\":{\"light_mode\":1073741824,\"dark_mode\":1073741824},\"border_color\":{\"light_mode\":0,\"dark_mode\":0},\"title_color\":{\"light_mode\":8505,\"dark_mode\":8505}},\"no_parking\":{\"fill_color\":{\"light_mode\":653943888,\"dark_mode\":653943888},\"border_color\":{\"light_mode\":-367536,\"dark_mode\":-367536},\"title_color\":{\"light_mode\":8505,\"dark_mode\":8505}},\"slow\":{\"fill_color\":{\"light_mode\":654292332,\"dark_mode\":654292332},\"border_color\":{\"light_mode\":16758124,\"dark_mode\":16758124},\"title_color\":{\"light_mode\":8505,\"dark_mode\":8505}},\"walkway\":{\"fill_color\":{\"light_mode\":654292332,\"dark_mode\":654292332},\"border_color\":{\"light_mode\":16758124,\"dark_mode\":16758124},\"title_color\":{\"light_mode\":8505,\"dark_mode\":8505}}},\"use_native_annotations\":true,\"enable_optimized_map_renderer\":true,\"client_bird_geocache_config\":{\"enabled\":true,\"cell_level\":10,\"expiry_seconds\":3000,\"query_limit\":16},\"client_zone_geocache_config\":{\"enabled\":true,\"cell_level\":13,\"expiry_seconds\":60,\"query_limit\":16}},\"charger_map\":{\"show_battery_percentage\":true,\"show_range_instead_of_battery_percentage\":false,\"can_use_bird_nearby_partner_filtered\":false,\"enable_user_location_v2\":false,\"enable_optimized_map_renderer\":false},\"private_bird\":{\"show_range_instead_of_battery_percentage\":false,\"show_sleep_wake_button\":false,\"max_distance_to_show_annotation_meters\":1.0,\"use_bird_user_actions\":false,\"scan_for_smartlock_in_foreground\":true,\"ownable_birds_navigate_to_details_screen_when_selected\":false,\"enable_my_bird_screen_renters\":false,\"enable_my_bird_screen_owners\":true,\"use_consolidated_private_bird_list\":true,\"enable_bird_air\":true,\"enable_bird_bike\":true,\"bird_air_firmware\":{},\"ad_hoc_pairing\":{\"allowed_models\":{\"rb1\":true,\"hje\":true}}},\"frequent_flyer\":{\"enabled\":false},\"identification\":{\"enable_identification_service\":true,\"onboarding_before_payment\":true,\"identification_help_article\":\"https://help.bird.co/\",\"min_rectangle_confidence\":0.7,\"min_landmark_width_ratio\":0.3,\"enable_manual_image_heuristics\":true},\"lease\":{\"lease_types\":{\"helmet\":{\"enabled\":false,\"lease_duration_seconds\":86400}}},\"localization\":{\"ota\":{\"enabled\":true,\"bird_project_id\":\"ced9dc76-aaf1-416c-9da9-7ac3f28e78ce\"}},\"bird_pay\":{\"enable_bird_pay\":true,\"show_bird_pay_on_map\":false,\"pay_support_phone\":\"111111111\",\"pay_support_email\":\"help@bird.co\",\"bird_pay_max_amount\":10000,\"bird_pay_min_amount\":100,\"enable_payment_passthrough\":false,\"enable_tap_to_pay\":false,\"enable_quick_apple_pay\":true,\"show_merchant_info_on_pin_tap\":true,\"merchant_details_blurb\":\"Support local.\",\"merchant_details_secondary_blurb\":\"Order takeout or delivery from this location\",\"onboardingconfig\":{\"enabled\":false,\"navigation_title\":\"BIRD PAY\",\"steps\":[{\"kind\":\"introducing_bird_pay\",\"step\":1,\"title\":\"Introducing Bird Pay\",\"asset\":{\"media\":{\"media_id\":\"00000000-0000-0000-0000-000000019a96\",\"media_url\":\"https://bird-static-assets.s3-us-west-2.amazonaws.com/bird_pay/bird_logo_background.png\"}},\"body_text\":\"Use your Bird credits to make purchases at local businesses\",\"action_button_text\":\"NEXT\"}]},\"onboarding_config\":{\"enabled\":false,\"navigation_title\":\"BIRD PAY\",\"steps\":[{\"kind\":\"introducing_bird_pay\",\"step\":1,\"title\":\"Introducing Bird Pay\",\"asset\":{\"media\":{\"media_id\":\"00000000-0000-0000-0000-000000019a96\",\"media_url\":\"https://bird-static-assets.s3-us-west-2.amazonaws.com/bird_pay/bird_logo_background.png\"}},\"body_text\":\"Use your Bird credits to make purchases at local businesses\",\"action_button_text\":\"NEXT\"}]},\"enable_merchant_site_tips\":true},\"rider_profile\":{\"enable_beginner_mode_by_model\":{},\"enable_beginner_mode_onboarding\":false,\"beginner_mode_max_rides\":3,\"rider_map_toggle_max_rides\":3,\"enable_toggle_in_ride\":false,\"enable_toggle_out_of_ride\":false},\"offer\":{\"enabled\":false},\"good_parking_coupons\":{\"enabled\":false,\"minutes_between_rides\":120},\"ride_pass\":{\"enabled\":true,\"sessions_shown\":10000,\"enabled_v2\":true,\"upsell_interval_seconds\":345600,\"enable_tax\":true},\"braze\":{\"proximity_incentive\":{\"rate_limit_seconds\":86400}},\"bird_plus\":{\"enabled\":false},\"thin_client\":{\"enabled\":false},\"rider_home_area_prompt\":{\"enabled\":false},\"views\":{\"receipt\":{\"show_download_invoice_button\":true}},\"banner_config\":{\"banner_ids\":[\"7bcdcbcd-3b04-49f6-8235-5278bb548fd2\"]},\"enable_dynamic_alerts\":true,\"enable_charger_snooze_release\":false,\"test_feature\":{\"android_min\":\"1.0.0\",\"ios_min\":\"1.0.0\"},\"enable_physical_lock_replacement\":false,\"blur_physical_lock_combination\":false,\"enable_physical_lock_photo_confirmation\":true,\"require_ride_end_photo_to_end_ride\":true,\"required_ride_end_photo_upload_timeout\":20,\"enable_improved_task_list\":false,\"android_beacon\":{\"enable_ibeacon_scan_reporting\":true,\"monitored_ibeacon_proximity_uuids\":[\"09142332-4556-0F78-899E-EBBCCE94EFF0\",\"09142332-4556-0F78-899E-EBBCCE94EFF1\",\"8429897A-E6CF-48F6-A9E1-9DA032905787\"],\"ibeacon_batch_submit_period\":30,\"enable_bluetooth_scan_reporting\":true,\"headless_scan_period\":10,\"enable_third_party_scans\":false,\"headless_scan_mode\":\"one_off\",\"headless_scan_periodic_interval\":3600,\"enable_bluetooth_management\":false},\"ios_beacon\":{\"enable_ibeacon_scan_reporting\":true,\"monitored_ibeacon_proximity_uuids\":[\"09142332-4556-0F78-899E-EBBCCE94EFF0\",\"09142332-4556-0F78-899E-EBBCCE94EFF1\",\"8429897A-E6CF-48F6-A9E1-9DA032905787\"],\"ibeacon_batch_submit_period\":30,\"enable_bluetooth_scan_reporting\":true,\"headless_scan_period\":10,\"enable_third_party_scans\":false,\"headless_scan_mode\":\"one_off\",\"headless_scan_periodic_interval\":3600,\"enable_bluetooth_management\":false},\"bird_finder\":{\"active_scan_repeat_duration\":5,\"passive_scan_repeat_duration\":60},\"android_gov_tech\":{\"enable_community_mode_v2\":true,\"community_mode_max_photos_input\":5},\"ios_gov_tech\":{\"enable_community_mode_v2\":true,\"community_mode_max_photos_input\":5},\"user_interface\":{\"allow_rider_dark_mode\":true},\"show_price_on_scanner\":\"onpricechange\",\"use_new_bounty_annotation\":true,\"enable_ml_kit_barcode_scanner\":false,\"show_price_change_notification_modal\":false,\"enable_physical_lock_charger_release_message\":true,\"enable_admin_toggle_lifecycle\":true,\"test\":{},\"show_physical_lock_last_compliant_modal\":false,\"show_physical_lock_last_non_compliant_modal\":false,\"operator\":{\"enable_operator\":false,\"enable_partner_operator\":false,\"side_menu_title\":\"Operator\",\"features\":{\"map\":{\"enable_operator_birds_endpoint\":false,\"enable_scan_button\":true,\"enable_areas\":false,\"enable_location_bounties\":true,\"enable_downed_birds_pin\":false,\"enable_failed_bounty_pin\":false,\"enable_offline_pin\":true,\"hours_on_bounty_to_be_overdue\":24,\"filters\":{\"enable_collect_state_filter\":false,\"enable_damaged_state_filter\":false,\"enable_ready_state_filter\":false,\"enable_inspection_state_filter\":false,\"enable_is_in_damage_nest_filter\":false,\"enable_is_in_peril_filter\":true,\"enable_last_located_date_filter\":false,\"enable_last_ridden_date_filter\":false,\"enable_partner_available_filter\":false,\"enable_partner_captured_filter\":false,\"enable_partner_damaged_filter\":false,\"enable_partner_in_ride_filter\":false,\"enable_partner_low_battery_filter\":false,\"enable_partner_missing_filter\":false,\"enable_partner_lost_filter\":false,\"enable_battery_level_filter\":false,\"enable_partners_filter\":false,\"enable_submerged_filter\":false,\"enable_offline_filter\":true,\"enable_bounty_filter\":false,\"enable_bounty_charge_filter\":false,\"enable_bounty_move_filter\":false,\"enable_failed_bounty_filter\":false,\"enable_area_filters\":false,\"enable_charge_task_filter\":false,\"enable_move_task_filter\":false,\"enable_last_qualifying_event_date_filter\":false,\"enable_dispatch_filter\":false,\"enable_parking_nests_filter\":false,\"enable_bird_model_filter\":false,\"bird_model_filters\":[{\"model\":\"bd\",\"description\":\"Bird Zero\"},{\"model\":\"rf\",\"description\":\"Bird One\"},{\"model\":\"b2\",\"description\":\"Bird Two\"},{\"model\":\"bc\",\"description\":\"Bird Cruiser\"},{\"model\":\"es\",\"description\":\"ESB\"},{\"model\":\"esx\",\"description\":\"ESX\"},{\"model\":\"m365\",\"description\":\"M365\"}],\"enable_hide_cannot_access_filter\":true,\"enable_quick_filters\":false,\"enable_fancy_multiselect\":false,\"enable_variable_fee_area_quick_filter\":false,\"enable_battery_filter_logic_toggle\":true},\"flight_sheet\":{\"version\":\"v2\",\"enable_flight_sheet\":false,\"enable_bounty_reasons\":false,\"enable_other_possible_locations\":false,\"enable_last_ride_info\":false,\"enable_ride_end_photo\":false,\"enable_locate_bird\":false,\"enable_change_radar_mode\":false,\"enable_change_radar_profile\":false,\"enable_tracking_information\":false,\"enable_property_report\":false,\"enable_captive_recovery\":false,\"enable_mark_unmark_damaged\":false,\"replace_unmark_damaged_with_inspection\":true,\"enable_command_lock_unlock\":false,\"enable_command_lock_unlock_from_repair_flow\":false,\"enable_command_alarm\":false,\"enable_command_flash_lights\":false,\"enable_command_soft_reset\":false,\"enable_past_repairs\":false,\"enable_past_repairs_from_repair_flow\":false,\"enable_diagnostics\":false,\"enable_diagnostics_from_repair_flow\":false},\"enable_parking_nests\":false,\"map_pins_stale_threshold\":30000,\"enable_server_driven_map_pins\":false,\"enable_server_driven_filters\":false,\"enable_server_driven_areas\":false,\"enable_cannot_access_badge\":true,\"allow_area_tap_to_select_marker_areas\":false,\"map_areas_last_update_refresh_threshold\":60,\"zoom_include_user_location_threshold\":10000.0,\"demand_cells_tappable\":true,\"show_recommended_birds_after_tap\":true,\"operator_area\":{},\"enable_nests\":true,\"enable_optimized_map_renderer\":true,\"enable_warehouses\":false},\"task_list\":{\"enabled\":false,\"v2\":true,\"enable_alarm_action\":false,\"enable_lock_action\":false,\"enable_cancel_task_action\":false,\"enable_direct_task_cancel\":false,\"show_task_limit\":false},\"nest_map\":{\"enabled\":false,\"enable_storage_nest_release_all_tasks\":false,\"enable_claim_nest_without_task\":false,\"enable_multi_nest_claim\":false,\"enable_nest_multi_claim_manual_selection\":false,\"enable_expanded_nest_pin\":true,\"expanded_pin_zoom_threshold\":16},\"lifecycle_editor\":{\"enabled\":false},\"bulk_scanner\":{\"enable_in_side_menu\":false,\"enable_from_map_scan_button\":false,\"enable_capture_action\":false,\"enable_release_action\":false,\"enable_mark_damaged_action\":false,\"enable_mark_fixed_action\":false,\"enable_chirp_action\":false,\"enable_alarm_action\":false,\"enable_capture_and_mark_damaged_action\":false,\"enable_capture_and_start_task_action\":false,\"enable_capture_and_load_action\":false,\"enable_release_anywhere_and_end_task_action\":false,\"enable_wake_bluetooth_action\":false,\"enable_new_capture_flow\":true,\"new_capture_flow_requires_capture_confirmation\":false},\"sweep_birds\":{\"enabled\":false,\"enable_service_center_details\":false,\"enable_signal_filter\":false,\"enable_signal_buckets\":false,\"enable_variable_update_frequency\":false},\"wake_birds\":{\"enabled\":false,\"enable_wake_individual\":false,\"enable_sleep_individual\":false,\"enable_batch_wake\":false,\"enable_sweep_wake\":false,\"enable_sweep_wake_for_partners\":false,\"enable_bulk_scanner_wake\":false,\"enable_hibernate\":true,\"bulk_wake_max_vehicles\":10,\"bulk_wake_max_retries\":0,\"enable_sleep_powerline\":true,\"hibernation_batch_frequency\":\"never\",\"force_sleep_battery_threshold\":50},\"legacy_wake_birds\":{\"enabled\":false},\"id_tools\":{\"enabled\":false,\"enable_dissociate_qr\":false,\"enable_dissociate_license\":false,\"enable_dissociate_brain\":false,\"enable_dissociate_any_brain\":false,\"enable_dissociate_handlebar\":false,\"enable_dissociate_helmet\":false,\"enable_dissociate_german_license\":false,\"enable_dissociate_israel_license\":false,\"enable_dissociate_lora_device\":false,\"enable_dissociate_one_code\":false,\"enable_dissociate_battery_serial\":true,\"enable_dissociate_motor\":false,\"enable_dissociate_us_ca_plate\":false,\"enable_dissociate_pcm\":false,\"enable_dissociate_physical_lock_sticker\":false,\"enable_dissociate_beacon\":false,\"enable_dissociate_radar_tag\":false,\"enable_associate_qr\":false,\"enable_associate_license\":false,\"enable_associate_brain\":false,\"enable_associate_any_brain\":true,\"enable_associate_handlebar\":false,\"enable_associate_helmet\":false,\"enable_associate_german_license\":false,\"enable_associate_israel_license\":false,\"enable_associate_lora_device\":false,\"enable_associate_one_code\":false,\"enable_associate_battery_serial\":true,\"enable_associate_motor\":false,\"enable_associate_us_ca_plate\":false,\"enable_associate_pcm\":false,\"enable_associate_physical_lock_sticker\":false,\"enable_associate_beacon\":false,\"enable_associate_radar_tag\":false,\"enable_qc_sync\":false,\"enable_identify_with_bird_finder\":false,\"enable_identify_with_manual_code_entry\":false,\"brain_swap_timeout_seconds\":600},\"replace_qr\":{\"enabled\":false},\"command_center\":{\"enabled\":false,\"enable_past_repairs\":false,\"enable_entry_routing\":false},\"field_center\":{\"enabled\":false,\"enable_from_map_scan_button\":false},\"work_orders\":{\"enable_inspection\":false,\"inspection_flow\":\"legacy\",\"enable_repair\":false,\"repair_flow\":\"legacy\",\"enable_work_order_history\":false,\"past_work_orders_display_count\":3},\"activity_log\":{\"enabled\":false,\"enable_view_past_activity\":false,\"max_shift_history_limit\":0,\"shiftless_max_inactivity_time_limit\":0},\"radar\":{\"enable_recovery_tool_pairing\":false,\"rssi_moving_average_weight\":1.0,\"min_rssi\":-110.0,\"max_rssi\":-30.0,\"heat_map_cell_radius\":10.0},\"release\":{\"separate_capture_release_flow\":true,\"verify_release_capability\":false,\"modal_display_limit_per_day\":3,\"release_assignments\":{\"enabled\":false},\"release_anywhere_uses_release_service\":true},\"reports\":{\"enabled\":false},\"enable_lookup_bird\":false,\"trips\":{\"enabled\":false,\"enable_training_modals\":false},\"health_check\":{\"enabled\":false,\"article_id\":\"\"},\"repair\":{\"enable_repair_v3\":false,\"enable_ml_kit_scanner\":false,\"remove_manual_entry_from_inspection_scanner\":true,\"require_vehicle_scan_confirmation_for_inspection\":true,\"require_vehicle_scan_confirmation_for_repair\":true},\"fleet_status\":{\"enabled\":false,\"enable_predictions\":false,\"enable_actions\":false,\"enable_fleet_list\":false,\"enable_fleet_marker_animation\":true},\"fleet_report\":{\"enabled\":false},\"maintenance\":{\"enable_inventory\":true},\"transfer_order\":{\"enable_operator_transfer_order\":false,\"enable_transfer_order\":false,\"enable_scrap_order\":false,\"enable_container_order_lookup\":false,\"allow_sku_scan_override\":false,\"override_upload_bolvia_signed_url\":false,\"min_sku_inbound_scan_before_process_allowed\":2147483647,\"enable_pickup_test_ride\":true,\"request_scrap_order_reason\":false},\"settings\":{\"enabled\":true},\"battery_swap\":{\"enabled_battery_swap_map_button\":true},\"inventory\":{\"enable_check_in\":false,\"enable_check_out\":false,\"enable_drop_off\":false,\"enable_pick_up\":false},\"ar_parking\":{\"scan\":{\"enabled\":false},\"raw_data\":false,\"debug\":false},\"nest_claims\":{\"enable\":true,\"claim_cooldown_minutes\":30},\"nest_suggestion\":{\"enabled\":true,\"max_nest_distance_from_user_meters\":100.0,\"max_nest_capacity\":10,\"photo_required\":true},\"zone_map\":{\"enable\":false,\"zone_pin_zoom_threshold\":11},\"notification_center\":{\"enabled\":true,\"category_filters_enabled\":true}},\"enable_complete_other_users_task\":false,\"enable_unlock_physical_locks\":false,\"permissions\":{\"require_location_services\":false,\"require_location_services_always\":false,\"require_camera\":false,\"require_notifications\":false,\"require_bluetooth\":false,\"require_background_app_refresh\":false},\"enable_release_all_tasks_distance_check\":true,\"enable_peripheral_keyboard_support\":false,\"on_duty\":{\"enable_on_off_duty\":false,\"enable_refresh_on_duty\":false,\"refresh_on_duty_interval\":30,\"user_track_interval\":30,\"user_tracks_bluetooth_scan_duration_seconds\":5,\"require_bluetooth_permission\":false,\"require_location_permission\":true,\"require_push_notification_permission\":true,\"enable_dispatch_when_on_duty\":false,\"show_map_pins_when_off_duty\":true,\"enable_capture_bird_when_off_duty\":true,\"enable_release_bird_when_off_duty\":true,\"require_on_duty_to_use_operator_mode\":false,\"allow_mock_locations\":false},\"bluetooth_locks\":{}},\"contractor\":{\"task_list\":{\"enable_lock_unlock_action\":false},\"enable_transaction_history_v2\":true},\"platform\":{\"enable_partners\":false,\"show_partners_on_rider_map\":false},\"compliance\":{\"warn_fine_lock_compliance\":0,\"warn_fine_leave_outside_service_area\":0,\"enable_no_parking_area_warnings\":false,\"user_can_delete_account\":true},\"can_see_rebalance_bounties\":true,\"use_new_nest_annotation\":false,\"photo_upload\":{\"default_compression_quality\":65,\"ride_target_width\":768,\"ride_compression_quality\":10,\"drop_target_width\":1024,\"drop_compression_quality\":85,\"bird_watcher_target_width\":1024,\"bird_watcher_compression_quality\":85,\"priority_collect_target_width\":1024,\"priority_collect_compression_quality\":85,\"community_target_width\":1024,\"community_compression_quality\":85,\"complaint_target_width\":1024,\"complaint_compression_quality\":85,\"lock_issue_target_width\":1024,\"lock_issue_compression_quality\":85,\"cannot_access_target_width\":1024,\"cannot_access_compression_quality\":85},\"merchant\":{\"enable_merchant_mode\":true,\"enable_manual_location_on_input\":false,\"enable_merchant_agreements\":false,\"merchant_banner_agreement_config\":{}},\"zendesk\":{\"web_help_center\":{\"enabled\":true,\"launch_in_external_browser\":false,\"rider_help_center_url\":\"https://help.bird.co\",\"flyer_help_center_url\":\"https://birdflyer.zendesk.com\",\"operator_help_center_url\":\"https://birdb2b.zendesk.com\"}},\"enable_legacy_operator_mode\":false,\"enable_areas_as_bitmap\":false,\"enable_onboarding_ride_entry\":false,\"enable_onboarding_banner_entry\":true,\"enable_roles_drop_down\":true,\"enable_schema_driven_analytics\":true,\"horizontal_accuracy_radius_multiplier\":2.0,\"supercharger\":{\"enable_supercharger\":false,\"user_tracks_reporting_period_seconds\":30,\"user_tracks_bluetooth_scan_duration_seconds\":5,\"mark_missing_threshold_radius_meters\":100.0,\"mark_missing_bird_finder_required_interval_seconds\":10,\"enable_updated_post_capture_requirement_failure_popup\":false,\"enable_updated_post_claim_requirement_failure_popup\":false},\"use_banner_prioritization\":true,\"enable_auth_v2_flow\":true,\"damaged_transport_show_announcement\":false,\"damage_drops_hide_quantity\":false,\"end_ride_rating_config\":{\"enable_end_ride_rating_issues_v2\":true,\"enable_end_ride_rating_issues_v2_grouped\":true,\"enable_end_ride_rating_issues_v2_tabbed\":false},\"user_tracking\":{\"enabled\":true,\"track_interval_seconds\":60,\"bluetooth_scan_duration_seconds\":5},\"inaccessible_bird\":{\"report_max_photos_input\":5,\"enable_rider_cannot_access\":false,\"enable_charger_cannot_access\":false,\"enable_supercharger_cannot_access\":true,\"enable_operator_cannot_access\":true,\"rider_role_config\":{\"cannot_access_threshold_radius_meters\":5.0E7,\"mark_missing_bird_finder_required_interval_seconds\":10},\"charger_role_config\":{\"cannot_access_threshold_radius_meters\":5.0E7,\"mark_missing_bird_finder_required_interval_seconds\":10},\"supercharger_role_config\":{\"cannot_access_threshold_radius_meters\":5.0E7,\"mark_missing_bird_finder_required_interval_seconds\":10},\"operator_role_config\":{\"cannot_access_threshold_radius_meters\":5.0E7,\"mark_missing_bird_finder_required_interval_seconds\":10}},\"bird_code_entry\":{\"show_bird_code_entry_screen\":false,\"min_bird_code_length\":4,\"max_bird_code_length\":5},\"enable_id_card_string_swap\":false,\"native_update_identifier\":\"1260842311\",\"in_ride_tracks_interval_ms\":5000,\"allow_cdn_location\":true,\"enable_area_specific_rider_bar_messages\":false,\"enable_sign_in_with_apple\":true,\"enable_sign_in_with_google\":true,\"prefer_chirp_alarm_over_chirp_command\":false,\"enable_tooltip_preferred_placement\":false,\"show_submerged_bounties_to_operators\":false,\"pill_button_config\":{},\"seconds_before_reopening_to_show_countdown\":1800,\"tax_information\":{\"enable_signup_flow_screen\":false,\"enable_settings_button\":false,\"enable_compliant_receipts\":true,\"country_name\":\"United States\",\"show_signup_flow_skip_button\":false,\"enable_signup_flow_autosubmit_no\":false},\"enable_helmet_selfie\":false,\"hide_rebalance_tasks\":false,\"hide_damage_rebalance_tasks\":false,\"enable_offline_analytics\":true,\"pricing_ui\":{\"enabled\":false,\"enable_scanner_tap_to_see_pricing\":false,\"flight_bar_pricing\":{\"enabled\":true}},\"enable_after_hours_alert\":true,\"enable_database_driven_analytics\":true,\"flyer\":{\"enable_flyer\":false,\"enable_flyer_promo_banner_for_riders\":false,\"enable_level_up_banner_for_flyer_level_one\":false,\"live\":false},\"nest_search_accuracy_radius_limit\":0.0,\"android_location_update_interval_seconds\":3,\"enable_block_capture_by_overdue_task_percentage\":true,\"enable_multiple_smartlock_keys\":true,\"zigzag\":{\"enabled\":false},\"external_feed\":{},\"asset\":{\"enable_signed_url_upload\":true},\"onboarding\":{},\"selected_area_alpha_difference\":0.0,\"android\":{\"deserializer\":\"GSON\",\"debug_deserializer\":false},\"save_money\":{\"enabled\":false}}"
        val parsedJson = SpanTextUtil(context).simpleSpanJson(longJsonString)
        Assert.assertTrue("parsedJson not empty", parsedJson.isNotEmpty())
    }

@SuppressLint("CheckResult")
    @Test
    public fun json_can_have_null_value() {
        val parsedJson = SpanTextUtil(context).simpleSpanJson(
            """{ "field": null }"""
        )
        Assert.assertEquals(
            parsedJson.toString(),
            """
            {
              "field": null
            }
            """.trimIndent()
        )
    }

    @Test
    public fun json_can_have_empty_fields() {
        val parsedJson = SpanTextUtil(context).simpleSpanJson(
            """{ "field": "" }"""
        )

        Truth.assertThat(parsedJson.toString()).isEqualTo(
            """
            {
              "field": ""
            }
            """.trimIndent()
        )
    }

    @Test
    public fun json_can_be_invalid() {
        val parsedJson = SpanTextUtil(context).simpleSpanJson(
            """[{ "field": null }"""
        )

        Truth.assertThat(parsedJson.toString()).isEqualTo(
            """[{ "field": null }"""
        )
    }

    @Test
    public fun json_object_is_pretty_printed() {
        val parsedJson = SpanTextUtil(context).simpleSpanJson(
            """{ "field1": "something", "field2": "else" }"""
        )

        Truth.assertThat(parsedJson.toString()).isEqualTo(
            """
            {
              "field1": "something",
              "field2": "else"
            }
            """.trimIndent()
        )
    }

    @Test
    public fun json_array_is_pretty_printed() {
        val parsedJson = SpanTextUtil(context).simpleSpanJson(
            """[{ "field1": "something1", "field2": "else1" }, { "field1": "something2", "field2": "else2" }]"""
        )

        Truth.assertThat(parsedJson.toString()).isEqualTo(
            """
            [
              {
                "field1": "something1",
                "field2": "else1"
              },
              {
                "field1": "something2",
                "field2": "else2"
              }
            ]
            """.trimIndent()
        )
    }
}
